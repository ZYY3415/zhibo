<include file="public@header" />
<style>
    form{
        margin-top:20px;
    }
    .form-group{
        overflow:auto;
    }
    .auth_name
    {
        margin-right:20px;
    }
</style>
</head>
<body>
<div class="wrap js-check-wrap">
    <ul class="nav nav-tabs">
        <li role="presentation"><a href="{:url('index')}">权限管理</a></li>
        <li role="presentation"><a href="{:url('addauth')}">添加权限</a></li>
        <li role="presentation" class="active"><a href="#">分配权限</a></li>
    </ul>
    <form class="form-horizontal js-ajax-form margin-top-20" action="{:url('authorize')}" method="post">
        <input type="hidden" name="id" value="{$id}" />
        <input type="hidden" name="role_id" value="{$role_id}" />
        <div class="form-group">
            <label for="all_auth" class="control-label col-sm-2">所有权限</label>
            <div class="col-sm-10">
                <input type="checkbox" name=""  id="all_auth">
            </div>
        </div>
        <div class="form-group">
            <label for="authlist" class="control-label col-sm-2">权限列表</label>
            <div class="col-sm-8 authlist">
                <volist name="auths" id="vo">
                    <span class="auth_name">
                    <input type="checkbox"  name="auth[{$vo.id}]" id="authlist" value="1"  <in name="$vo.id" value="$data">checked </in>  >
                        {$vo.auth_name}
                    </span>
                 </volist>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary js-ajax-submit">{:lang('ADD')}</button>
            </div>
        </div>
    </form>
</div>
<script src="__STATIC__/js/admin.js"></script>
<script>
    $('#all_auth').click(function(){
         $('.authlist').find('input[type="checkbox"]').prop('checked',function(i,val){
             return !val;
         });
    });
</script>
</body>
</html>