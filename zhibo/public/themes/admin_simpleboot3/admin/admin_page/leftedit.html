<include file="public@header"/>
</head>
<body>
<div class="wrap js-check-wrap">
    <ul class="nav nav-tabs">
        <li><a href="{:url('AdminPage/top')}">单页左部</a></li>
        <li><a href="{:url('AdminPage/topadd')}">添加单页</a></li>
        <li class="active"><a href="#">编辑单页</a></li>
    </ul>
    <form method="post" class="form-horizontal js-ajax-form margin-top-20" action="{:url('AdminPage/addPost')}">
        <input type="hidden" name="id" value="{$page.id}">
        <input type="hidden" name="position" value="2">
        <div class="form-group">
            <label class="col-sm-2 control-label"><span class="form-required">*</span>标题:</label>
            <div class="col-md-6 col-sm-10">
                <input type="text" class="form-control" name="title" value="{$page.title}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"><span class="form-required">*</span>图标:</label>
            <div class="col-md-6 col-sm-10">
                <input type="hidden" name="icon" id="icon" value="{$page.icon}">
                <a href="javascript:uploadOneImage('图片上传','#icon');">
                    <if condition="empty($page.icon)">
                        <img src="__TMPL__/public/assets/images/default-thumbnail.png"
                             id="icon-preview"
                             width="30" style="cursor: pointer"/>
                        <else />
                        <img src="{:cmf_get_image_preview_url($page.icon)}"
                             id="icon-preview"
                             width="30" style="cursor: pointer;background-color: #999"/>
                    </if>
                </a>
                <input type="button" class="btn btn-sm btn-cancel-thumbnail" value="取消图片">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">应用链接:</label>
            <div class="col-md-6 col-sm-10">
                <input type="text" class="form-control" name="link" value="{$page.link}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"><span class="form-required">*</span>房间:</label>
            <div class="col-md-6 col-sm-10">
                <select name="rid" class="form-control">
                    <foreach name="rooms" item="vo">
                        <if condition="$key==$page.rid">
                            <option value="{$key}" selected>{$vo}</option>
                            <else />
                            <option value="{$key}" >{$vo}</option>
                        </if>
                    </foreach>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"><span class="form-required">*</span>打开类型:</label>
            <div class="col-md-6 col-sm-10">
                <select name="open_type" class="form-control">
                    <foreach name="arrOpenType" key="k" item="vo">
                        <if condition="$k==$page.open_type">
                            <option value="{$k}" selected>{$vo}</option>
                            <else/>
                            <option value="{$k}">{$vo}</option>
                        </if>
                    </foreach>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"><span class="form-required">*</span>窗体宽度（px）:</label>
            <div class="col-md-6 col-sm-10">
                <input type="number" class="form-control" name="width" value="{$page.width}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"><span class="form-required">*</span>窗体高度（px）:</label>
            <div class="col-md-6 col-sm-10">
                <input type="number" class="form-control" name="height" value="{$page.height}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"><span class="form-required">*</span>是否开启:</label>
            <div class="col-md-6 col-sm-10">
                <select name="is_start" class="form-control">
                    <foreach name="arrIsStart" key="k" item="vo">
                        <if condition="$k==$page.is_start">
                            <option value="{$k}" selected>{$vo}</option>
                            <else/>
                            <option value="{$k}" >{$vo}</option>
                        </if>
                    </foreach>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">背景颜色:</label>
            <div class="col-md-6 col-sm-10">
                <input type="text" class="form-control jscolor" name="background" value="{$page.background}">
            </div>
        </div>
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-primary js-ajax-submit">{:lang("SAVE")}</button>
            <a class="btn btn-default" href="{:cmf_url('AdminPage/left')}">返回</a>
        </div>
    </form>
</div>
<script src="__STATIC__/js/admin.js"></script>
<script src="__STATIC__/js/jscolor/jscolor.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('.btn-cancel-thumbnail').click(function () {
            $('#icon-preview').attr('src', '__TMPL__/public/assets/images/default-thumbnail.png');
            $('#icon').val('');
        });
    });
</script>
</body>
</html>